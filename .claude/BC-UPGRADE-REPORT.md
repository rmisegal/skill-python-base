# BC Skill Upgrade Report

**Date:** 2025-12-22
**Issue:** TOC "English References35" without dots

## Issue Analysis

### Visual Evidence
Screenshot showed:
- "English References35" without leader dots
- Page number concatenated to text
- Misaligned compared to Hebrew entries

### Root Cause
**CLS Version Mismatch** - Project using CLS version without `l@englishsubsection` handler.

| Component | Expected | Actual |
|-----------|----------|--------|
| CLS Handler | `l@englishsubsection` | Missing |
| Min CLS Version | v6.2.2 | < v6.2.2 |
| TOC Entry Type | `englishsubsection` | Correct |

### QA Rules Triggered
| Rule ID | Description | Severity |
|---------|-------------|----------|
| `toc-english-entry-not-ltr` | English entry renders RTL | CRITICAL |
| `cls-version-mismatch` | CLS version outdated | WARNING |

## BC Skills Upgraded

### 1. bc-super (v1.0.0 → v1.1.0)

**Changes:**
- Added `BCCLSVersionValidator` to Phase 1 prerequisites
- Added CLS version requirements table
- BLOCKING: Content generation won't proceed if CLS < v6.2.2

**New Section:**
```markdown
### CLS Version Requirements
| Feature | Minimum CLS Version | Handler |
|---------|---------------------|---------|
| English References TOC | **v6.2.2** | `l@englishsubsection` |
| Hebrew section TOC | v5.11.0 | `l@section` with RTL |
| TOC page numbers LTR | v6.3.1 | `\textdir TLT` in handlers |
```

### 2. bc-academic-source (v1.1.0 → v1.2.0)

**Changes:**
- Added CLS version requirement documentation
- Added warning about `l@englishsubsection` handler
- Clarified: DO NOT manually create English section commands

**New Section:**
```markdown
**CLS Version Requirement:**
- **Minimum CLS version: v6.2.2** for `\printenglishbibliography` TOC support
- Required handler: `l@englishsubsection`
- If CLS version < v6.2.2: TOC will show "English References35" without dots
```

## Resolution Path

To fix the TOC issue, users should:

1. **Update CLS version** to v6.2.2 or higher
   - Reference: `C:\25D\CLS-examples\hebrew-academic-template.cls`
   - Use: `qa-cls-version-fix` skill

2. **Re-run BC content generation** after CLS update
   - BC will now validate CLS version before proceeding

## Files Modified

| File | Version Change |
|------|----------------|
| `.claude/skills/bc-super/skill.md` | 1.0.0 → 1.1.0 |
| `.claude/skills/bc-academic-source/skill.md` | 1.1.0 → 1.2.0 |

## Validation

The upgrade ensures:
- BC won't generate content if CLS version is incompatible
- BC documentation clearly states CLS version requirements
- Users get actionable error when CLS is outdated

---

**Generated by:** upgrade-bc-qa command
**QA Ground Truth:** qa-toc-comprehensive-detect (v2.5.0)
